[defaults]
inventory = inventory/
# Local development: Collections from sibling directories + system paths
collections_path = ./collections:~/.ansible/collections:/usr/share/ansible/collections
host_key_checking = False
retry_files_enabled = False
gathering = smart

[inventory]
# Enable Tailscale dynamic inventory plugin
enable_plugins = freeformz.ansible.tailscale, yaml, ini, auto

# Parallelism - Maximum concurrent workers to configure
# Default is 5, increase for faster multi-worker provisioning
# Adjust based on your workstation's capacity
forks = 10

# Redis fact caching (Redis Cloud)
# Connection string is set via environment variable ANSIBLE_CACHE_PLUGIN_CONNECTION
# This should be configured in your shell profile (~/.bashrc or ~/.zshrc):
#   export ANSIBLE_CACHE_PLUGIN_CONNECTION="host:port:db:password"
# Format: host:port:db:password (e.g., redis-host.com:6379:0:mypassword)
fact_caching = community.general.redis
fact_caching_timeout = 86400

stdout_callback = yaml
bin_ansible_callbacks = True

# Callbacks for Redis logging (optional)
# callback_plugins = ./plugins/callback
# callback_whitelist = redis_log

[privilege_escalation]
become = True
become_method = sudo
become_user = root
become_ask_pass = False

[ssh_connection]
pipelining = True
ssh_args = -o ControlMaster=auto -o ControlPersist=60s
